# Demo scenario for HOW descriptors with Resnet 50 backbone, without the last block

demo_how:
  data_folder: data # Path relative to the package root (can be absolute path)
  datasets: [roxford5k, rparis6k] # Datasets to evaluate on
  codebook_dataset: sfm120k_subset20k # Dataset to train the codebook on
  features_name: how_r50- # Name of the local features (will be downloaded for datasets and codebook_dataset)
  features_number: 1000 # Number of features that were extracted per image

# General properties

index:
  gpu_id: 0 # Gpu id to use, None to run on cpu

# Steps

train_codebook:
  codebook:
    size: 65536 # Number of visual words (i.e. clusters of local features) in the codebook

build_ivf:
  kernel:
    binary: True # Binarization option in the asmk
  ivf:
    use_idf: False # IDF weighting in the inverted file

  quantize:
    multiple_assignment: 1 # Number of assignments for the db vectors
  aggregate: {}

query_ivf:
  quantize:
    multiple_assignment: 5 # Number of assignments for the query vectors
  aggregate: {}
  search: {}
  similarity:
    similarity_threshold: 0.0 # Feature similarity threshold
    alpha: 3.0 # Feature similarity exponent
